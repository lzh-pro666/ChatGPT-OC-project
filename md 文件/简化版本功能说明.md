# 简化版本功能说明

## 当前功能

### 1. 基本文本显示
- ✅ 支持纯文本消息显示
- ✅ 自动换行和文本布局
- ✅ 防抖动机制，避免文字抖动

### 2. 用户区分
- **用户消息**：
  - 蓝色背景 (`systemBlueColor`)
  - 白色文字
  - 右对齐显示
  
- **AI消息**：
  - 浅灰色背景 (`systemGray5Color`)
  - 黑色文字
  - 左对齐显示

### 3. 视觉样式
- 圆角设计 (8pt)
- 适当的内边距
- 清晰的视觉层次

## 技术实现

### 布局结构
```objective-c
ASInsetLayoutSpec (外边距)
└── ASStackLayoutSpec (水平对齐)
    └── ASTextNode (文本节点)
```

### 样式设置
```objective-c
// 用户消息样式
textColor = [UIColor whiteColor];
backgroundColor = [UIColor systemBlueColor];
justifyContent = ASStackLayoutJustifyContentEnd;  // 右对齐

// AI消息样式
textColor = [UIColor blackColor];
backgroundColor = [UIColor systemGray5Color];
justifyContent = ASStackLayoutJustifyContentStart; // 左对齐
```

## 优势

1. **简单稳定**：避免复杂的布局嵌套，减少出错可能
2. **性能优秀**：直接使用 ASTextNode，布局计算简单
3. **易于维护**：代码结构清晰，便于后续扩展
4. **视觉清晰**：通过颜色和对齐方式清楚区分用户和AI

## 不包含的功能

- ❌ 聊天气泡效果
- ❌ Markdown 格式解析
- ❌ 代码块高亮
- ❌ 复杂富文本样式

## 扩展计划

如果后续需要添加功能，可以按以下顺序：

1. **Markdown 解析**：添加粗体、斜体等基本格式
2. **代码块支持**：使用专门的代码块视图
3. **链接处理**：支持可点击的链接
4. **图片显示**：支持图片消息

## 使用示例

```objective-c
// 创建用户消息
RichMessageCellNode *userNode = [[RichMessageCellNode alloc] initWithMessage:@"你好" isFromUser:YES];

// 创建AI消息
RichMessageCellNode *aiNode = [[RichMessageCellNode alloc] initWithMessage:@"您好！我是AI助手" isFromUser:NO];
```

## 注意事项

- 保持当前简化版本的稳定性
- 如需添加功能，建议逐步添加并充分测试
- 避免引入可能导致布局问题的复杂组件
